<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Day 1: Shopping Cart Logic</title>
    <link rel="stylesheet" href="styles.css" />

    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        background-color: #f5f5f5;
      }

      h1 {
        color: #333;
        text-align: center;
      }

      .container {
        background: white;
        padding: 30px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .instructions {
        background: #e3f2fd;
        padding: 20px;
        border-radius: 4px;
        margin-bottom: 20px;
        border-left: 4px solid #2196f3;
      }

      .test-section {
        margin: 20px 0;
        padding: 15px;
        background: #f9f9f9;
        border-radius: 4px;
      }

      button {
        background: #2196f3;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 4px;
        cursor: pointer;
        margin: 5px;
        font-size: 14px;
      }

      button:hover {
        background: #1976d2;
      }

      .console-output {
        background: #263238;
        color: #aed581;
        padding: 15px;
        border-radius: 4px;
        font-family: "Courier New", monospace;
        font-size: 12px;
        margin-top: 10px;
        max-height: 400px;
        overflow-y: auto;
      }

      .warning {
        background: #fff3cd;
        border-left: 4px solid #ffc107;
        padding: 15px;
        margin: 15px 0;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Day 3: Cart display</h1>

      <div id="cart-count">Cart: 0 items</div>

      <h2>Products</h2>

      <input
        type="text"
        placeholder="Search products..."
        oninput="searchProducts(this.value)"
      />

      <select onchange="sortProducts(this.value)">
        <option value="">Sort by...</option>
        <option value="price-low">Price: Low to High</option>
        <option value="price-high">Price: High to Low</option>
        <option value="name">Name: A-Z</option>
      </select>

      <div>
        <button onclick="filterByCategory('all')">All</button>
        <button onclick="filterByCategory('electronics')">Electronics</button>
        <button onclick="filterByCategory('clothing')">Clothing</button>
        <button onclick="filterByCategory('home')">Home</button>
        <button onclick="filterByCategory('office')">Office</button>
      </div>

      <div id="product-grid"></div>

      <div id="cart-title">
        <h2>Shopping Cart</h2>
        <button onclick="clearCart()" class="clear-btn">Clear Cart</button>
        <button onclick="displayCart()" class="history-btn">View Cart</button>
        <button onclick="viewShoppingHistory()" class="history-btn">Shopping history</button>
      </div>
      <section id="cart-section">
        <div id="cart-items"></div>
        <div id="cart-totals"></div>
      </section>

      <button onclick="proceedToCheckout()" class="checkout-btn">
        Checkout
      </button>

      <div id="overlay" onclick="hideCheckoutSummary()"></div>
      <div id="hiddenDiv">
        <div id="content-container">
        <div class="form-container">
          <h2>Shipping information</h2>
          <form id="contactForm">
            <div class="form-group">
              <label for="name">Name:</label>
              <input type="text" id="name" name="name" required />
            </div>

            <div class="form-group">
              <label for="email">Email:</label>
              <input type="email" id="email" name="email" required />
            </div>

            <div class="form-group">
              <label for="address">Address:</label>
              <input type="text" id="address" name="address" required />
            </div>
          </form>
        </div>
        <div id="order-summary">
          <h3>Order Summary</h3>
          <p id="summary-items">Total items: 0</p>
          <p id="summary-subtotal">Subtotal: $0.00</p>
          <p id="summary-tax">Tax (8%): $0.00</p>
          <p id="summary-total">Total: $0.00</p>
        </div>
        </div>
        <button onclick="confirmCheckout()" id="confirm-btn">Confirm Checkout</button>
        <button class="cancel-btn" onclick="hideCheckoutSummary()">Cancel</button>
      </div>

      <div class="test-section">
        <h3>Manual Testing (Optional)</h3>
        <button onclick="manualTestAdd()">Add Laptop</button>
        <button onclick="manualTestAdd2()">Add 2 Mice</button>
        <button onclick="manualTestIncrease()">Increase Laptop</button>
        <button onclick="manualTestRemove()">Remove Mouse</button>
        <button onclick="manualDisplayCart()">Show Cart</button>
        <button onclick="clearConsole()">Clear Console</button>
      </div>

      <div class="console-output" id="console-output">
        <div>Console output will appear here...</div>
        <div>Open the browser console (F12) for full details.</div>
      </div>
    </div>
    <script src="cart.js"></script>
    <script src="products.js"></script>
    <script src="catalog.js"></script>
    <script src="cart-ui.js"></script>
    <script>
      // Console override to show in page
      const consoleOutput = document.getElementById("console-output");
      const originalLog = console.log;
      const originalClear = console.clear;

      console.log = function (...args) {
        originalLog.apply(console, args);
        const message = args
          .map((arg) =>
            typeof arg === "object" ? JSON.stringify(arg, null, 2) : arg
          )
          .join(" ");
        consoleOutput.innerHTML += message + "\n";
        consoleOutput.scrollTop = consoleOutput.scrollHeight;
      };

      console.clear = function () {
        originalClear.apply(console);
        consoleOutput.innerHTML = "";
      };

      function clearConsole() {
        consoleOutput.innerHTML = "<div>Console cleared...</div>";
      }

      // Manual test functions (for interactive testing)
      function manualTestAdd() {
        cart = [];
        addToCart(products.laptop, 1);
      }

      function manualTestAdd2() {
        addToCart(products.mouse, 2);
      }

      function manualTestIncrease() {
        increaseQuantity(1);
      }

      function manualTestRemove() {
        removeFromCart(2);
      }

      function manualDisplayCart() {
        displayCart();
      }
    </script>
  </body>
</html>
